Sim, esse erro aqui Ã© o mais importante e estÃ¡ diretamente relacionado com sua busca sÃ³ retornar â€œOvoâ€:

pgsql
Copiar
Editar
api/foods/search:1 Failed to load resource: the server responded with a status of 400 (Bad Request)
âœ… O que esse erro significa?
O status 400 (Bad Request) indica que o servidor recebeu uma requisiÃ§Ã£o malformada, provavelmente com um parÃ¢metro invÃ¡lido ou ausente.

âš ï¸ Isso explica por que a busca falha:
Se a URL gerada for algo como:

bash
Copiar
Editar
/api/foods/search?query=
ou

bash
Copiar
Editar
/api/foods/search?query=undefined
O backend provavelmente estÃ¡ esperando um valor no query, e quando recebe vazio ou undefined, retorna 400.

ðŸ” Como investigar:
Veja no console a URL real que estÃ¡ sendo usada:

No seu queryFn:

ts
Copiar
Editar
console.log("ðŸ”Ž URL usada:", `/api/foods/search?query=${encodeURIComponent(debouncedQuery.trim())}`);
Teste isso com um alimento como â€œbananaâ€.

Confirme se debouncedQuery tem valor correto:

Ã€s vezes, o useEffect de debounce pode disparar antes do searchQuery ser atualizado corretamente.

ðŸ’¡ SoluÃ§Ã£o rÃ¡pida:
Garanta que a queryFn nÃ£o faÃ§a nenhuma requisiÃ§Ã£o se o valor nÃ£o for vÃ¡lido, mesmo que o enabled jÃ¡ controle isso:

ts
Copiar
Editar
queryFn: async () => {
  const query = debouncedQuery.trim();
  if (!query || query.length < 3) return [];

  const response = await fetch(`/api/foods/search?query=${encodeURIComponent(query)}`, {
    credentials: "include"
  });

  if (!response.ok) {
    console.error("âŒ Erro na requisiÃ§Ã£o:", response.status, response.statusText);
    return [];
  }

  const result = await response.json();
  return result;
}
Extra â€“ sobre os outros erros de WebSocket:
Esses aqui:

pgsql
Copiar
Editar
WebSocket connection to 'wss://...' failed
nÃ£o tÃªm relaÃ§Ã£o direta com a busca de alimentos. Eles indicam que:

A aplicaÃ§Ã£o estÃ¡ tentando usar WebSocket (talvez para hot reload ou logs).

EstÃ¡ com URL errada (wss://localhost:undefined/...).

Isso afeta desenvolvimento, nÃ£o a funcionalidade da API de busca em si.

âœ… ConclusÃ£o
Erro 400 Ã© a causa principal da sua busca falhar para quase tudo que nÃ£o seja "Ovo".

Provavelmente, a query estÃ¡ sendo enviada vazia ou com erro.

Adiciona console.log(debouncedQuery) e console.log(URL) para confirmar.

Garante no queryFn que sÃ³ chama a API se o valor for vÃ¡lido (isso reforÃ§a o enabled).