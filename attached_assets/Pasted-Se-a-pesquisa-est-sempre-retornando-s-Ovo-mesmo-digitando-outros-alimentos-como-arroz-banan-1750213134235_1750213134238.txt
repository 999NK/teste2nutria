Se a pesquisa estÃ¡ sempre retornando sÃ³ â€œOvoâ€, mesmo digitando outros alimentos como â€œarrozâ€, â€œbananaâ€, etc., o problema pode estar em uma das etapas do fluxo. Vou listar os principais motivos possÃ­veis divididos por etapa da aplicaÃ§Ã£o â€” e como investigar cada um:

âœ… 1. A API /api/foods e /api/foods/search sÃ³ retorna "Ovo"
ğŸ‘‰ Motivo possÃ­vel: a API backend estÃ¡ filtrando incorretamente ou estÃ¡ limitada.

O que testar:
No navegador (ou via Insomnia/Postman), acesse manualmente:

bash
Copiar
Editar
/api/foods?search=arroz
/api/foods/search?query=arroz
Veja se realmente retorna apenas "Ovo" no JSON.

Se sim, o problema estÃ¡ no backend.

Verifique no backend:
A lÃ³gica SQL (se for banco relacional) ou filtro (se for Firebase/Mongo/etc) da busca.

Se o parÃ¢metro de busca estÃ¡ sendo usado com LIKE ou equivalente.

âœ… 2. O frontend estÃ¡ sobrescrevendo o resultado
ğŸ‘‰ Motivo possÃ­vel: o useQuery estÃ¡ sobrescrevendo os resultados, talvez por queryKey repetido ou erro no cache do React Query.

O que testar:
Adicione um console.log(debouncedQuery) e console.log(result) dentro da queryFn das duas queries (userFoods e usdaFoods).

Veja se estÃ¡ chegando a query correta e se o resultado vem com alimentos variados, mas Ã© ignorado ou filtrado depois.

âœ… 3. O debounce estÃ¡ atrasando a execuÃ§Ã£o da busca
ğŸ‘‰ Motivo possÃ­vel: o debouncedQuery sÃ³ Ã© atualizado depois de 500ms, entÃ£o se vocÃª digita e aperta Enter logo depois, ele ainda nÃ£o buscou.

O que testar:
Digite devagar e espere ~1 segundo apÃ³s parar de digitar.

Veja se os resultados mudam.

SoluÃ§Ã£o:
Adicione um onKeyDown com Enter para forÃ§ar a busca:

ts
Copiar
Editar
onKeyDown={(e) => {
  if (e.key === 'Enter') {
    setDebouncedQuery(searchQuery);
  }
}}
âœ… 4. A condicional do enabled pode estar desativando a query
ğŸ‘‰ Motivo possÃ­vel: o enabled da useQuery depende de debouncedQuery.trim().length > 2. Se vocÃª digitar sÃ³ â€œovoâ€ (3 letras), funciona. Mas â€œarrozâ€ pode ter erro de espaÃ§o ou caractere invisÃ­vel.

O que testar:
FaÃ§a console.log([${debouncedQuery}]) para ver se estÃ¡ vindo com espaÃ§os extras.

Tente digitar termos com certeza de mais de 3 letras.

âœ… 5. A query do frontend usa o campo errado para buscar
ğŸ‘‰ Motivo possÃ­vel: o backend sÃ³ busca por "name", e vocÃª estÃ¡ esperando buscar por "categoria" ou "marca".

Verifique no backend:
Ele estÃ¡ fazendo WHERE name LIKE '%query%'?

Ou vocÃª quer que busque por qualquer campo (ex: marca, categoria)?

âœ… 6. Erro no retorno do backend e vocÃª estÃ¡ fazendo return [] silenciosamente
No cÃ³digo vocÃª tem:

ts
Copiar
Editar
if (!response.ok) {
  console.error(...);
  return [];
}
Se o backend estiver retornando 500, ou mesmo um 200 com corpo malformado, vai cair nesse return [] sem erro visÃ­vel (exceto no console).

âœ… 7. Apenas o "Ovo" existe nos seus dados
Talvez o banco de dados (tanto o personalizado quanto o USDA) sÃ³ tem â€œOvoâ€ inserido.

O que fazer:
Confirme que os dados estÃ£o lÃ¡ mesmo (no banco ou via inspeÃ§Ã£o da API).

Adicione alimentos manuais no banco para testar.

âœ… Teste final para isolar o problema:
FaÃ§a esse teste direto no navegador:

bash
Copiar
Editar
http://localhost:3000/api/foods/search?query=arroz
ou

bash
Copiar
Editar
http://localhost:3000/api/foods?search=arroz
Veja o retorno bruto. Se o JSON tiver apenas "Ovo" mesmo digitando â€œarrozâ€, o backend estÃ¡ com problema.

